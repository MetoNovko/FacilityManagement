@model HomeViewModel

@{
    ViewData["Title"] = "Почетна";
    ViewData["Description"] = "Кратко инфо";
}

<ul id="dt-inventory-objects" class="tile-layout">
    @foreach (var invObject in Model.InventoryObjects)
    {
        <li class="tile-layout-item">
            <div class="tile-layout-item-content">
                <h2><a href="Home/Details/@invObject.Id" data-objectId="@invObject.Id">@invObject.Name</a></h2>
                <img src="~/images/chiller.jpg" alt="" />
                <p>@invObject.Manufacturer | @invObject.Model</p>
            </div>
        </li>
    }
</ul>

@section scripts {
    <script>
        // Function that renders the list items from our records
        function ulWriter(rowIndex, record, columns, cellWriter) {
            var cssClass = "tile-layout-item", li;
            if (rowIndex % 3 === 0) { cssClass += ' first'; }
            li = '<li class="' + cssClass + '"> \
                        <div class="tile-layout-item-content"> \
                            <h2><a href="Home/Details/' + record.Id + '">' + record.Name + '</a></h2> \
                            <img src="/images/chiller.jpg" alt="" /> \
                            <p>' + record.Description + '</p> \
                        </div> \
                    </li> \
            ';
            return li;
        }

        // Function that creates our records from the DOM when the page is loaded
        function ulReader(index, li, record) {
            var $li = $(li),
                $content = $li.find('.tile-layout-item-content');

            record.Id = $content.find("h2 a").attr("data-objectId");
            record.Name = $content.find("h2 a").html();
            record.Description = $content.find("p").html();

            console.log(record);
        }

        $('#dt-inventory-objects').dynatable({
            table: {
                bodyRowSelector: 'li'
            },
            dataset: {
                perPageDefault: 4,
                perPageOptions: [4, 8, 12]
            },
            writers: {
                _rowWriter: ulWriter
            },
            readers: {
                _rowReader: ulReader
            },
            params: {

            }
        });
    </script>
}